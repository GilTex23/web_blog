{% extends "base.html" %}

{% block title %}Вход в систему - Учебный Блог{% endblock %}

{% block content %}
<div class="max-w-md mx-auto">
    <div class="bg-white rounded-lg shadow-md p-8">
        <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Вход в систему</h2>
            <p class="text-gray-600">Введите свои учетные данные</p>
        </div>

        <form method="POST">
            <div class="mb-4">
                <label for="username" class="block text-gray-800 font-medium mb-2">Имя пользователя</label>
                <input type="text" id="username" name="username" value="{{ username or '' }}"
                       class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                       required>
            </div>
            <div class="mb-6">
                <label for="password" class="block text-gray-800 font-medium mb-2">Пароль</label>
                <div class="relative">
                    <input type="password" id="password" name="password"
                           class="w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           required minlength="6">
                    <button type="button" id="toggle-password"
                            class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <p id="password-error" class="text-red-500 text-sm mt-1 hidden"></p>
            </div>
            <button type="submit"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-200">
                Войти
            </button>
        </form>

        <div class="mt-1 text-center">
            <a href="{{ url_for('forgot_password') }}" class="text-sm text-blue-600 hover:text-blue-800">
                Забыли пароль?
            </a>
        </div>

        <div class="mt-6 text-center">
            <p class="text-sm text-gray-600">
                Нет аккаунта? <a href="{{ url_for('register') }}" class="text-blue-600 hover:text-blue-800 font-medium">Зарегистрироваться</a>
            </p>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        function togglePasswordVisibility(inputId, buttonId) {
            const input = document.getElementById(inputId);
            const button = document.getElementById(buttonId);
            const icon = button.querySelector('i');

            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            }
        }

        document.getElementById('toggle-password')?.addEventListener('click', () =>
            togglePasswordVisibility('password', 'toggle-password')
        );
    });
</script>

{% endblock %}